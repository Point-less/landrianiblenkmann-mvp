{% comment %}
Reusable snippet to show the latest FSM transition with a history link.
Inputs:
- transitions: queryset or list ordered newest-first
- history_url: optional link to full transition history
{% endcomment %}
<div class="transition-text">
    {% with latest=transitions|first %}
        {% if latest %}
            <span>{{ latest.from_state|default:'—' }} → {{ latest.to_state }}</span>
            <small class="muted">{{ latest.occurred_at|date:"m/d H:i" }}</small>
        {% else %}
            <span>No transitions yet.</span>
        {% endif %}
    {% endwith %}
</div>
{% if history_url %}
    {% if next_url %}
        <a class="history-link" href="{{ history_url }}?next={{ next_url|urlencode }}" title="View history">↺</a>
    {% else %}
        <a class="history-link" href="{{ history_url }}" title="View history">↺</a>
    {% endif %}
{% endif %}
